<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.50.0 (0)
 -->
<!-- Title: classes_ldm.models.diffusion.ddpm_inv Pages: 1 -->
<svg width="1796pt" height="1687pt"
 viewBox="0.00 0.00 1796.00 1687.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1683)">
<title>classes_ldm.models.diffusion.ddpm_inv</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1683 1792,-1683 1792,4 -4,4"/>
<!-- diffusion.ddpm_inv.DDPM -->
<g id="node1" class="node">
<title>diffusion.ddpm_inv.DDPM</title>
<polygon fill="none" stroke="black" points="69,-934.5 69,-1678.5 740,-1678.5 740,-934.5 69,-934.5"/>
<text text-anchor="middle" x="404.5" y="-1663.3" font-family="Times,serif" font-size="14.00">DDPM</text>
<polyline fill="none" stroke="black" points="69,-1655.5 740,-1655.5 "/>
<text text-anchor="start" x="77" y="-1640.3" font-family="Times,serif" font-size="14.00">channels : int</text>
<text text-anchor="start" x="77" y="-1625.3" font-family="Times,serif" font-size="14.00">clip_denoised : bool</text>
<text text-anchor="start" x="77" y="-1610.3" font-family="Times,serif" font-size="14.00">cond_stage_model : NoneType</text>
<text text-anchor="start" x="77" y="-1595.3" font-family="Times,serif" font-size="14.00">embedding_reg_weight : float</text>
<text text-anchor="start" x="77" y="-1580.3" font-family="Times,serif" font-size="14.00">first_stage_key : str</text>
<text text-anchor="start" x="77" y="-1565.3" font-family="Times,serif" font-size="14.00">image_size : int</text>
<text text-anchor="start" x="77" y="-1550.3" font-family="Times,serif" font-size="14.00">l_simple_weight : float</text>
<text text-anchor="start" x="77" y="-1535.3" font-family="Times,serif" font-size="14.00">learn_logvar : bool</text>
<text text-anchor="start" x="77" y="-1520.3" font-family="Times,serif" font-size="14.00">linear_end : float</text>
<text text-anchor="start" x="77" y="-1505.3" font-family="Times,serif" font-size="14.00">linear_start : float</text>
<text text-anchor="start" x="77" y="-1490.3" font-family="Times,serif" font-size="14.00">log_every_t : int</text>
<text text-anchor="start" x="77" y="-1475.3" font-family="Times,serif" font-size="14.00">logvar</text>
<text text-anchor="start" x="77" y="-1460.3" font-family="Times,serif" font-size="14.00">loss_type : str</text>
<text text-anchor="start" x="77" y="-1445.3" font-family="Times,serif" font-size="14.00">model</text>
<text text-anchor="start" x="77" y="-1430.3" font-family="Times,serif" font-size="14.00">model_ema</text>
<text text-anchor="start" x="77" y="-1415.3" font-family="Times,serif" font-size="14.00">model_lr : float</text>
<text text-anchor="start" x="77" y="-1400.3" font-family="Times,serif" font-size="14.00">monitor : str</text>
<text text-anchor="start" x="77" y="-1385.3" font-family="Times,serif" font-size="14.00">num_timesteps : int</text>
<text text-anchor="start" x="77" y="-1370.3" font-family="Times,serif" font-size="14.00">original_elbo_weight : float</text>
<text text-anchor="start" x="77" y="-1355.3" font-family="Times,serif" font-size="14.00">parameterization : str</text>
<text text-anchor="start" x="77" y="-1340.3" font-family="Times,serif" font-size="14.00">scheduler_config : NoneType</text>
<text text-anchor="start" x="77" y="-1325.3" font-family="Times,serif" font-size="14.00">unfreeze_model : bool</text>
<text text-anchor="start" x="77" y="-1310.3" font-family="Times,serif" font-size="14.00">use_ema : bool</text>
<text text-anchor="start" x="77" y="-1295.3" font-family="Times,serif" font-size="14.00">use_positional_encodings : bool</text>
<text text-anchor="start" x="77" y="-1280.3" font-family="Times,serif" font-size="14.00">use_scheduler</text>
<text text-anchor="start" x="77" y="-1265.3" font-family="Times,serif" font-size="14.00">v_posterior : float</text>
<polyline fill="none" stroke="black" points="69,-1257.5 740,-1257.5 "/>
<text text-anchor="start" x="77" y="-1242.3" font-family="Times,serif" font-size="14.00">configure_optimizers()</text>
<text text-anchor="start" x="77" y="-1227.3" font-family="Times,serif" font-size="14.00">ema_scope(context)</text>
<text text-anchor="start" x="77" y="-1212.3" font-family="Times,serif" font-size="14.00">forward(x)</text>
<text text-anchor="start" x="77" y="-1197.3" font-family="Times,serif" font-size="14.00">get_input(batch, k)</text>
<text text-anchor="start" x="77" y="-1182.3" font-family="Times,serif" font-size="14.00">get_loss(pred, target, mean)</text>
<text text-anchor="start" x="77" y="-1167.3" font-family="Times,serif" font-size="14.00">init_from_ckpt(path, ignore_keys, only_model)</text>
<text text-anchor="start" x="77" y="-1152.3" font-family="Times,serif" font-size="14.00">log_images(batch, N, n_row, sample, return_keys)</text>
<text text-anchor="start" x="77" y="-1137.3" font-family="Times,serif" font-size="14.00">on_train_batch_end()</text>
<text text-anchor="start" x="77" y="-1122.3" font-family="Times,serif" font-size="14.00">p_losses(x_start, t, noise)</text>
<text text-anchor="start" x="77" y="-1107.3" font-family="Times,serif" font-size="14.00">p_mean_variance(x, t, clip_denoised: bool)</text>
<text text-anchor="start" x="77" y="-1092.3" font-family="Times,serif" font-size="14.00">p_sample(x, t, clip_denoised, repeat_noise)</text>
<text text-anchor="start" x="77" y="-1077.3" font-family="Times,serif" font-size="14.00">p_sample_loop(shape, return_intermediates)</text>
<text text-anchor="start" x="77" y="-1062.3" font-family="Times,serif" font-size="14.00">predict_start_from_noise(x_t, t, noise)</text>
<text text-anchor="start" x="77" y="-1047.3" font-family="Times,serif" font-size="14.00">q_mean_variance(x_start, t)</text>
<text text-anchor="start" x="77" y="-1032.3" font-family="Times,serif" font-size="14.00">q_posterior(x_start, x_t, t)</text>
<text text-anchor="start" x="77" y="-1017.3" font-family="Times,serif" font-size="14.00">q_sample(x_start, t, noise)</text>
<text text-anchor="start" x="77" y="-1002.3" font-family="Times,serif" font-size="14.00">register_schedule(given_betas, beta_schedule, timesteps, linear_start, linear_end, cosine_s)</text>
<text text-anchor="start" x="77" y="-987.3" font-family="Times,serif" font-size="14.00">sample(batch_size, return_intermediates)</text>
<text text-anchor="start" x="77" y="-972.3" font-family="Times,serif" font-size="14.00">shared_step(batch)</text>
<text text-anchor="start" x="77" y="-957.3" font-family="Times,serif" font-size="14.00">training_step(batch, batch_idx)</text>
<text text-anchor="start" x="77" y="-942.3" font-family="Times,serif" font-size="14.00">validation_step(batch, batch_idx)</text>
</g>
<!-- diffusion.ddpm_inv.DiffusionWrapper -->
<g id="node2" class="node">
<title>diffusion.ddpm_inv.DiffusionWrapper</title>
<polygon fill="none" stroke="black" points="0,-446 0,-545 329,-545 329,-446 0,-446"/>
<text text-anchor="middle" x="164.5" y="-529.8" font-family="Times,serif" font-size="14.00">DiffusionWrapper</text>
<polyline fill="none" stroke="black" points="0,-522 329,-522 "/>
<text text-anchor="start" x="8" y="-506.8" font-family="Times,serif" font-size="14.00">conditioning_key</text>
<text text-anchor="start" x="8" y="-491.8" font-family="Times,serif" font-size="14.00">diffusion_model</text>
<text text-anchor="start" x="8" y="-476.8" font-family="Times,serif" font-size="14.00">train</text>
<polyline fill="none" stroke="black" points="0,-469 329,-469 "/>
<text text-anchor="start" x="8" y="-453.8" font-family="Times,serif" font-size="14.00">forward(x, t, c_concat: list, c_crossattn: list)</text>
</g>
<!-- diffusion.ddpm_inv.DiffusionWrapper&#45;&gt;diffusion.ddpm_inv.DDPM -->
<g id="edge3" class="edge">
<title>diffusion.ddpm_inv.DiffusionWrapper&#45;&gt;diffusion.ddpm_inv.DDPM</title>
<path fill="none" stroke="black" d="M178.97,-545.28C201.46,-621.07 246.8,-773.91 290.97,-922.79"/>
<polygon fill="black" stroke="black" points="291,-922.91 296.54,-927.53 294.41,-934.42 288.87,-929.8 291,-922.91"/>
<text text-anchor="middle" x="306.5" y="-904.8" font-family="Times,serif" font-size="14.00" fill="green">model</text>
</g>
<!-- diffusion.ddpm_inv.LatentDiffusion -->
<g id="node3" class="node">
<title>diffusion.ddpm_inv.LatentDiffusion</title>
<polygon fill="none" stroke="black" points="347,-108.5 347,-882.5 1788,-882.5 1788,-108.5 347,-108.5"/>
<text text-anchor="middle" x="1067.5" y="-867.3" font-family="Times,serif" font-size="14.00">LatentDiffusion</text>
<polyline fill="none" stroke="black" points="347,-859.5 1788,-859.5 "/>
<text text-anchor="start" x="355" y="-844.3" font-family="Times,serif" font-size="14.00">bbox_tokenizer : NoneType</text>
<text text-anchor="start" x="355" y="-829.3" font-family="Times,serif" font-size="14.00">clip_denoised : bool</text>
<text text-anchor="start" x="355" y="-814.3" font-family="Times,serif" font-size="14.00">colorize</text>
<text text-anchor="start" x="355" y="-799.3" font-family="Times,serif" font-size="14.00">concat_mode : bool</text>
<text text-anchor="start" x="355" y="-784.3" font-family="Times,serif" font-size="14.00">cond_ids</text>
<text text-anchor="start" x="355" y="-769.3" font-family="Times,serif" font-size="14.00">cond_stage_forward : NoneType</text>
<text text-anchor="start" x="355" y="-754.3" font-family="Times,serif" font-size="14.00">cond_stage_key : str</text>
<text text-anchor="start" x="355" y="-739.3" font-family="Times,serif" font-size="14.00">cond_stage_model : NoneType</text>
<text text-anchor="start" x="355" y="-724.3" font-family="Times,serif" font-size="14.00">cond_stage_trainable : bool</text>
<text text-anchor="start" x="355" y="-709.3" font-family="Times,serif" font-size="14.00">embedding_manager</text>
<text text-anchor="start" x="355" y="-694.3" font-family="Times,serif" font-size="14.00">first_stage_model</text>
<text text-anchor="start" x="355" y="-679.3" font-family="Times,serif" font-size="14.00">num_downs : int</text>
<text text-anchor="start" x="355" y="-664.3" font-family="Times,serif" font-size="14.00">num_timesteps_cond</text>
<text text-anchor="start" x="355" y="-649.3" font-family="Times,serif" font-size="14.00">restarted_from_ckpt : bool</text>
<text text-anchor="start" x="355" y="-634.3" font-family="Times,serif" font-size="14.00">scale_by_std : bool</text>
<text text-anchor="start" x="355" y="-619.3" font-family="Times,serif" font-size="14.00">scale_factor : float</text>
<text text-anchor="start" x="355" y="-604.3" font-family="Times,serif" font-size="14.00">shorten_cond_schedule</text>
<polyline fill="none" stroke="black" points="347,-596.5 1788,-596.5 "/>
<text text-anchor="start" x="355" y="-581.3" font-family="Times,serif" font-size="14.00">apply_model(x_noisy, t, cond, return_ids)</text>
<text text-anchor="start" x="355" y="-566.3" font-family="Times,serif" font-size="14.00">configure_opt_embedding()</text>
<text text-anchor="start" x="355" y="-551.3" font-family="Times,serif" font-size="14.00">configure_opt_model()</text>
<text text-anchor="start" x="355" y="-536.3" font-family="Times,serif" font-size="14.00">configure_optimizers()</text>
<text text-anchor="start" x="355" y="-521.3" font-family="Times,serif" font-size="14.00">decode_first_stage(z, predict_cids, force_not_quantize)</text>
<text text-anchor="start" x="355" y="-506.3" font-family="Times,serif" font-size="14.00">delta_border(h, w)</text>
<text text-anchor="start" x="355" y="-491.3" font-family="Times,serif" font-size="14.00">differentiable_decode_first_stage(z, predict_cids, force_not_quantize)</text>
<text text-anchor="start" x="355" y="-476.3" font-family="Times,serif" font-size="14.00">encode_first_stage(x)</text>
<text text-anchor="start" x="355" y="-461.3" font-family="Times,serif" font-size="14.00">forward(x, c)</text>
<text text-anchor="start" x="355" y="-446.3" font-family="Times,serif" font-size="14.00">get_first_stage_encoding(encoder_posterior)</text>
<text text-anchor="start" x="355" y="-431.3" font-family="Times,serif" font-size="14.00">get_fold_unfold(x, kernel_size, stride, uf, df)</text>
<text text-anchor="start" x="355" y="-416.3" font-family="Times,serif" font-size="14.00">get_input(batch, k, return_first_stage_outputs, force_c_encode, cond_key, return_original_cond, bs)</text>
<text text-anchor="start" x="355" y="-401.3" font-family="Times,serif" font-size="14.00">get_learned_conditioning(c)</text>
<text text-anchor="start" x="355" y="-386.3" font-family="Times,serif" font-size="14.00">get_weighting(h, w, Ly, Lx, device)</text>
<text text-anchor="start" x="355" y="-371.3" font-family="Times,serif" font-size="14.00">instantiate_cond_stage(config)</text>
<text text-anchor="start" x="355" y="-356.3" font-family="Times,serif" font-size="14.00">instantiate_embedding_manager(config, embedder)</text>
<text text-anchor="start" x="355" y="-341.3" font-family="Times,serif" font-size="14.00">instantiate_first_stage(config)</text>
<text text-anchor="start" x="355" y="-326.3" font-family="Times,serif" font-size="14.00">log_images(batch, N, n_row, sample, ddim_steps, ddim_eta, return_keys, quantize_denoised, inpaint, plot_denoise_rows, plot_progressive_rows, plot_diffusion_rows)</text>
<text text-anchor="start" x="355" y="-311.3" font-family="Times,serif" font-size="14.00">make_cond_schedule()</text>
<text text-anchor="start" x="355" y="-296.3" font-family="Times,serif" font-size="14.00">meshgrid(h, w)</text>
<text text-anchor="start" x="355" y="-281.3" font-family="Times,serif" font-size="14.00">on_save_checkpoint(checkpoint)</text>
<text text-anchor="start" x="355" y="-266.3" font-family="Times,serif" font-size="14.00">on_train_batch_start(batch, batch_idx, dataloader_idx)</text>
<text text-anchor="start" x="355" y="-251.3" font-family="Times,serif" font-size="14.00">p_losses(x_start, cond, t, noise)</text>
<text text-anchor="start" x="355" y="-236.3" font-family="Times,serif" font-size="14.00">p_mean_variance(x, c, t, clip_denoised: bool, return_codebook_ids, quantize_denoised, return_x0, score_corrector, corrector_kwargs)</text>
<text text-anchor="start" x="355" y="-221.3" font-family="Times,serif" font-size="14.00">p_sample(x, c, t, clip_denoised, repeat_noise, return_codebook_ids, quantize_denoised, return_x0, temperature, noise_dropout, score_corrector, corrector_kwargs)</text>
<text text-anchor="start" x="355" y="-206.3" font-family="Times,serif" font-size="14.00">p_sample_loop(cond, shape, return_intermediates, x_T, verbose, callback, timesteps, quantize_denoised, mask, x0, img_callback, start_T, log_every_t)</text>
<text text-anchor="start" x="355" y="-191.3" font-family="Times,serif" font-size="14.00">progressive_denoising(cond, shape, verbose, callback, quantize_denoised, img_callback, mask, x0, temperature, noise_dropout, score_corrector, corrector_kwargs, batch_size, x_T, start_T, log_every_t)</text>
<text text-anchor="start" x="355" y="-176.3" font-family="Times,serif" font-size="14.00">register_schedule(given_betas, beta_schedule, timesteps, linear_start, linear_end, cosine_s)</text>
<text text-anchor="start" x="355" y="-161.3" font-family="Times,serif" font-size="14.00">sample(cond, batch_size, return_intermediates, x_T, verbose, timesteps, quantize_denoised, mask, x0, shape)</text>
<text text-anchor="start" x="355" y="-146.3" font-family="Times,serif" font-size="14.00">sample_log(cond, batch_size, ddim, ddim_steps)</text>
<text text-anchor="start" x="355" y="-131.3" font-family="Times,serif" font-size="14.00">shared_step(batch)</text>
<text text-anchor="start" x="355" y="-116.3" font-family="Times,serif" font-size="14.00">to_rgb(x)</text>
</g>
<!-- diffusion.ddpm_inv.LatentDiffusion&#45;&gt;diffusion.ddpm_inv.DDPM -->
<g id="edge1" class="edge">
<title>diffusion.ddpm_inv.LatentDiffusion&#45;&gt;diffusion.ddpm_inv.DDPM</title>
<path fill="none" stroke="black" d="M751.05,-882.64C739.1,-897.22 727.12,-911.83 715.19,-926.4"/>
<polygon fill="none" stroke="black" points="712.19,-924.53 708.56,-934.49 717.6,-928.97 712.19,-924.53"/>
</g>
<!-- diffusion.ddpm_inv.Layout2ImgDiffusion -->
<g id="node4" class="node">
<title>diffusion.ddpm_inv.Layout2ImgDiffusion</title>
<polygon fill="none" stroke="black" points="984,-0.5 984,-70.5 1151,-70.5 1151,-0.5 984,-0.5"/>
<text text-anchor="middle" x="1067.5" y="-55.3" font-family="Times,serif" font-size="14.00">Layout2ImgDiffusion</text>
<polyline fill="none" stroke="black" points="984,-47.5 1151,-47.5 "/>
<polyline fill="none" stroke="black" points="984,-23.5 1151,-23.5 "/>
<text text-anchor="start" x="992" y="-8.3" font-family="Times,serif" font-size="14.00">log_images(batch, N)</text>
</g>
<!-- diffusion.ddpm_inv.Layout2ImgDiffusion&#45;&gt;diffusion.ddpm_inv.LatentDiffusion -->
<g id="edge2" class="edge">
<title>diffusion.ddpm_inv.Layout2ImgDiffusion&#45;&gt;diffusion.ddpm_inv.LatentDiffusion</title>
<path fill="none" stroke="black" d="M1067.5,-70.55C1067.5,-78.64 1067.5,-87.96 1067.5,-98.28"/>
<polygon fill="none" stroke="black" points="1064,-98.47 1067.5,-108.47 1071,-98.47 1064,-98.47"/>
</g>
</g>
</svg>
