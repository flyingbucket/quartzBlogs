<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.50.0 (0)
 -->
<!-- Title: classes_ldm.modules.diffusionmodules.openaimodel Pages: 1 -->
<svg width="1734pt" height="950pt"
 viewBox="0.00 0.00 1733.50 950.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 946)">
<title>classes_ldm.modules.diffusionmodules.openaimodel</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-946 1729.5,-946 1729.5,4 -4,4"/>
<!-- diffusionmodules.openaimodel.AttentionBlock -->
<g id="node1" class="node">
<title>diffusionmodules.openaimodel.AttentionBlock</title>
<polygon fill="none" stroke="black" points="237.5,-241.5 237.5,-400.5 406.5,-400.5 406.5,-241.5 237.5,-241.5"/>
<text text-anchor="middle" x="322" y="-385.3" font-family="Times,serif" font-size="14.00">AttentionBlock</text>
<polyline fill="none" stroke="black" points="237.5,-377.5 406.5,-377.5 "/>
<text text-anchor="start" x="245.5" y="-362.3" font-family="Times,serif" font-size="14.00">attention</text>
<text text-anchor="start" x="245.5" y="-347.3" font-family="Times,serif" font-size="14.00">channels</text>
<text text-anchor="start" x="245.5" y="-332.3" font-family="Times,serif" font-size="14.00">norm</text>
<text text-anchor="start" x="245.5" y="-317.3" font-family="Times,serif" font-size="14.00">num_heads : int</text>
<text text-anchor="start" x="245.5" y="-302.3" font-family="Times,serif" font-size="14.00">proj_out</text>
<text text-anchor="start" x="245.5" y="-287.3" font-family="Times,serif" font-size="14.00">qkv</text>
<text text-anchor="start" x="245.5" y="-272.3" font-family="Times,serif" font-size="14.00">use_checkpoint : bool</text>
<polyline fill="none" stroke="black" points="237.5,-264.5 406.5,-264.5 "/>
<text text-anchor="start" x="245.5" y="-249.3" font-family="Times,serif" font-size="14.00">forward(x)</text>
</g>
<!-- diffusionmodules.openaimodel.AttentionPool2d -->
<g id="node2" class="node">
<title>diffusionmodules.openaimodel.AttentionPool2d</title>
<polygon fill="none" stroke="black" points="22.5,-256.5 22.5,-385.5 195.5,-385.5 195.5,-256.5 22.5,-256.5"/>
<text text-anchor="middle" x="109" y="-370.3" font-family="Times,serif" font-size="14.00">AttentionPool2d</text>
<polyline fill="none" stroke="black" points="22.5,-362.5 195.5,-362.5 "/>
<text text-anchor="start" x="30.5" y="-347.3" font-family="Times,serif" font-size="14.00">attention</text>
<text text-anchor="start" x="30.5" y="-332.3" font-family="Times,serif" font-size="14.00">c_proj</text>
<text text-anchor="start" x="30.5" y="-317.3" font-family="Times,serif" font-size="14.00">num_heads</text>
<text text-anchor="start" x="30.5" y="-302.3" font-family="Times,serif" font-size="14.00">positional_embedding</text>
<text text-anchor="start" x="30.5" y="-287.3" font-family="Times,serif" font-size="14.00">qkv_proj</text>
<polyline fill="none" stroke="black" points="22.5,-279.5 195.5,-279.5 "/>
<text text-anchor="start" x="30.5" y="-264.3" font-family="Times,serif" font-size="14.00">forward(x)</text>
</g>
<!-- diffusionmodules.openaimodel.Downsample -->
<g id="node3" class="node">
<title>diffusionmodules.openaimodel.Downsample</title>
<polygon fill="none" stroke="black" points="551,-0.5 551,-129.5 661,-129.5 661,-0.5 551,-0.5"/>
<text text-anchor="middle" x="606" y="-114.3" font-family="Times,serif" font-size="14.00">Downsample</text>
<polyline fill="none" stroke="black" points="551,-106.5 661,-106.5 "/>
<text text-anchor="start" x="559" y="-91.3" font-family="Times,serif" font-size="14.00">channels</text>
<text text-anchor="start" x="559" y="-76.3" font-family="Times,serif" font-size="14.00">dims : int</text>
<text text-anchor="start" x="559" y="-61.3" font-family="Times,serif" font-size="14.00">op</text>
<text text-anchor="start" x="559" y="-46.3" font-family="Times,serif" font-size="14.00">out_channels</text>
<text text-anchor="start" x="559" y="-31.3" font-family="Times,serif" font-size="14.00">use_conv</text>
<polyline fill="none" stroke="black" points="551,-23.5 661,-23.5 "/>
<text text-anchor="start" x="559" y="-8.3" font-family="Times,serif" font-size="14.00">forward(x)</text>
</g>
<!-- diffusionmodules.openaimodel.ResBlock -->
<g id="node7" class="node">
<title>diffusionmodules.openaimodel.ResBlock</title>
<polygon fill="none" stroke="black" points="699.5,-189 699.5,-453 910.5,-453 910.5,-189 699.5,-189"/>
<text text-anchor="middle" x="805" y="-437.8" font-family="Times,serif" font-size="14.00">ResBlock</text>
<polyline fill="none" stroke="black" points="699.5,-430 910.5,-430 "/>
<text text-anchor="start" x="707.5" y="-414.8" font-family="Times,serif" font-size="14.00">channels</text>
<text text-anchor="start" x="707.5" y="-399.8" font-family="Times,serif" font-size="14.00">dropout</text>
<text text-anchor="start" x="707.5" y="-384.8" font-family="Times,serif" font-size="14.00">emb_channels</text>
<text text-anchor="start" x="707.5" y="-369.8" font-family="Times,serif" font-size="14.00">emb_layers</text>
<text text-anchor="start" x="707.5" y="-354.8" font-family="Times,serif" font-size="14.00">h_upd</text>
<text text-anchor="start" x="707.5" y="-339.8" font-family="Times,serif" font-size="14.00">in_layers</text>
<text text-anchor="start" x="707.5" y="-324.8" font-family="Times,serif" font-size="14.00">out_channels</text>
<text text-anchor="start" x="707.5" y="-309.8" font-family="Times,serif" font-size="14.00">out_layers</text>
<text text-anchor="start" x="707.5" y="-294.8" font-family="Times,serif" font-size="14.00">skip_connection</text>
<text text-anchor="start" x="707.5" y="-279.8" font-family="Times,serif" font-size="14.00">updown : bool</text>
<text text-anchor="start" x="707.5" y="-264.8" font-family="Times,serif" font-size="14.00">use_checkpoint : bool</text>
<text text-anchor="start" x="707.5" y="-249.8" font-family="Times,serif" font-size="14.00">use_conv : bool</text>
<text text-anchor="start" x="707.5" y="-234.8" font-family="Times,serif" font-size="14.00">use_scale_shift_norm : bool</text>
<text text-anchor="start" x="707.5" y="-219.8" font-family="Times,serif" font-size="14.00">x_upd</text>
<polyline fill="none" stroke="black" points="699.5,-212 910.5,-212 "/>
<text text-anchor="start" x="707.5" y="-196.8" font-family="Times,serif" font-size="14.00">forward(x, emb)</text>
</g>
<!-- diffusionmodules.openaimodel.Downsample&#45;&gt;diffusionmodules.openaimodel.ResBlock -->
<g id="edge4" class="edge">
<title>diffusionmodules.openaimodel.Downsample&#45;&gt;diffusionmodules.openaimodel.ResBlock</title>
<path fill="none" stroke="black" d="M661.18,-107.84C675.35,-119.95 689.97,-133.77 702,-148 710.17,-157.67 718.1,-168.06 725.69,-178.77"/>
<polygon fill="black" stroke="black" points="725.73,-178.83 732.43,-181.48 732.56,-188.69 725.86,-186.04 725.73,-178.83"/>
<text text-anchor="middle" x="733.5" y="-151.8" font-family="Times,serif" font-size="14.00" fill="green">h_upd</text>
</g>
<!-- diffusionmodules.openaimodel.Downsample&#45;&gt;diffusionmodules.openaimodel.ResBlock -->
<g id="edge5" class="edge">
<title>diffusionmodules.openaimodel.Downsample&#45;&gt;diffusionmodules.openaimodel.ResBlock</title>
<path fill="none" stroke="black" d="M634.76,-129.66C640.87,-141.11 647.7,-152.68 655,-163 665.9,-178.42 678.28,-193.82 691.14,-208.62"/>
<polygon fill="black" stroke="black" points="691.26,-208.75 698.23,-210.6 699.2,-217.75 692.23,-215.9 691.26,-208.75"/>
<text text-anchor="middle" x="676.5" y="-151.8" font-family="Times,serif" font-size="14.00" fill="green">x_upd</text>
</g>
<!-- diffusionmodules.openaimodel.ResBlockDual -->
<g id="node8" class="node">
<title>diffusionmodules.openaimodel.ResBlockDual</title>
<polygon fill="none" stroke="black" points="443.5,-181.5 443.5,-460.5 654.5,-460.5 654.5,-181.5 443.5,-181.5"/>
<text text-anchor="middle" x="549" y="-445.3" font-family="Times,serif" font-size="14.00">ResBlockDual</text>
<polyline fill="none" stroke="black" points="443.5,-437.5 654.5,-437.5 "/>
<text text-anchor="start" x="451.5" y="-422.3" font-family="Times,serif" font-size="14.00">channels</text>
<text text-anchor="start" x="451.5" y="-407.3" font-family="Times,serif" font-size="14.00">dropout</text>
<text text-anchor="start" x="451.5" y="-392.3" font-family="Times,serif" font-size="14.00">emb_channels</text>
<text text-anchor="start" x="451.5" y="-377.3" font-family="Times,serif" font-size="14.00">emb_layers</text>
<text text-anchor="start" x="451.5" y="-362.3" font-family="Times,serif" font-size="14.00">h_upd</text>
<text text-anchor="start" x="451.5" y="-347.3" font-family="Times,serif" font-size="14.00">in_layers</text>
<text text-anchor="start" x="451.5" y="-332.3" font-family="Times,serif" font-size="14.00">out_channels</text>
<text text-anchor="start" x="451.5" y="-317.3" font-family="Times,serif" font-size="14.00">out_layers</text>
<text text-anchor="start" x="451.5" y="-302.3" font-family="Times,serif" font-size="14.00">skip_connection</text>
<text text-anchor="start" x="451.5" y="-287.3" font-family="Times,serif" font-size="14.00">spade</text>
<text text-anchor="start" x="451.5" y="-272.3" font-family="Times,serif" font-size="14.00">updown : bool</text>
<text text-anchor="start" x="451.5" y="-257.3" font-family="Times,serif" font-size="14.00">use_checkpoint : bool</text>
<text text-anchor="start" x="451.5" y="-242.3" font-family="Times,serif" font-size="14.00">use_conv : bool</text>
<text text-anchor="start" x="451.5" y="-227.3" font-family="Times,serif" font-size="14.00">use_scale_shift_norm : bool</text>
<text text-anchor="start" x="451.5" y="-212.3" font-family="Times,serif" font-size="14.00">x_upd</text>
<polyline fill="none" stroke="black" points="443.5,-204.5 654.5,-204.5 "/>
<text text-anchor="start" x="451.5" y="-189.3" font-family="Times,serif" font-size="14.00">forward(x, emb, s_cond)</text>
</g>
<!-- diffusionmodules.openaimodel.Downsample&#45;&gt;diffusionmodules.openaimodel.ResBlockDual -->
<g id="edge6" class="edge">
<title>diffusionmodules.openaimodel.Downsample&#45;&gt;diffusionmodules.openaimodel.ResBlockDual</title>
<path fill="none" stroke="black" d="M550.88,-111.28C541.14,-122.2 532.4,-134.62 527,-148 524.23,-154.88 522.19,-162.03 520.77,-169.33"/>
<polygon fill="black" stroke="black" points="520.76,-169.45 523.84,-175.97 519,-181.32 515.92,-174.8 520.76,-169.45"/>
<text text-anchor="middle" x="548.5" y="-151.8" font-family="Times,serif" font-size="14.00" fill="green">h_upd</text>
</g>
<!-- diffusionmodules.openaimodel.Downsample&#45;&gt;diffusionmodules.openaimodel.ResBlockDual -->
<g id="edge7" class="edge">
<title>diffusionmodules.openaimodel.Downsample&#45;&gt;diffusionmodules.openaimodel.ResBlockDual</title>
<path fill="none" stroke="black" d="M550.7,-85.81C522.98,-98.88 491.98,-119.03 476,-148 472.24,-154.82 469.82,-161.88 468.54,-169.07"/>
<polygon fill="black" stroke="black" points="468.51,-169.32 471.94,-175.67 467.4,-181.27 463.97,-174.93 468.51,-169.32"/>
<text text-anchor="middle" x="497.5" y="-151.8" font-family="Times,serif" font-size="14.00" fill="green">x_upd</text>
</g>
<!-- diffusionmodules.openaimodel.EncoderUNetModelWT -->
<g id="node4" class="node">
<title>diffusionmodules.openaimodel.EncoderUNetModelWT</title>
<polygon fill="none" stroke="black" points="1250,-550 1250,-904 1456,-904 1456,-550 1250,-550"/>
<text text-anchor="middle" x="1353" y="-888.8" font-family="Times,serif" font-size="14.00">EncoderUNetModelWT</text>
<polyline fill="none" stroke="black" points="1250,-881 1456,-881 "/>
<text text-anchor="start" x="1258" y="-865.8" font-family="Times,serif" font-size="14.00">attention_resolutions</text>
<text text-anchor="start" x="1258" y="-850.8" font-family="Times,serif" font-size="14.00">channel_mult : tuple</text>
<text text-anchor="start" x="1258" y="-835.8" font-family="Times,serif" font-size="14.00">conv_resample : bool</text>
<text text-anchor="start" x="1258" y="-820.8" font-family="Times,serif" font-size="14.00">dropout : int</text>
<text text-anchor="start" x="1258" y="-805.8" font-family="Times,serif" font-size="14.00">dtype</text>
<text text-anchor="start" x="1258" y="-790.8" font-family="Times,serif" font-size="14.00">fea_tran</text>
<text text-anchor="start" x="1258" y="-775.8" font-family="Times,serif" font-size="14.00">in_channels</text>
<text text-anchor="start" x="1258" y="-760.8" font-family="Times,serif" font-size="14.00">input_block_chans : list</text>
<text text-anchor="start" x="1258" y="-745.8" font-family="Times,serif" font-size="14.00">input_blocks</text>
<text text-anchor="start" x="1258" y="-730.8" font-family="Times,serif" font-size="14.00">middle_block</text>
<text text-anchor="start" x="1258" y="-715.8" font-family="Times,serif" font-size="14.00">model_channels</text>
<text text-anchor="start" x="1258" y="-700.8" font-family="Times,serif" font-size="14.00">num_head_channels : int</text>
<text text-anchor="start" x="1258" y="-685.8" font-family="Times,serif" font-size="14.00">num_heads : int</text>
<text text-anchor="start" x="1258" y="-670.8" font-family="Times,serif" font-size="14.00">num_heads_upsample : int</text>
<text text-anchor="start" x="1258" y="-655.8" font-family="Times,serif" font-size="14.00">num_res_blocks</text>
<text text-anchor="start" x="1258" y="-640.8" font-family="Times,serif" font-size="14.00">out_channels</text>
<text text-anchor="start" x="1258" y="-625.8" font-family="Times,serif" font-size="14.00">time_embed</text>
<text text-anchor="start" x="1258" y="-610.8" font-family="Times,serif" font-size="14.00">use_checkpoint : bool</text>
<polyline fill="none" stroke="black" points="1250,-603 1456,-603 "/>
<text text-anchor="start" x="1258" y="-587.8" font-family="Times,serif" font-size="14.00">convert_to_fp16()</text>
<text text-anchor="start" x="1258" y="-572.8" font-family="Times,serif" font-size="14.00">convert_to_fp32()</text>
<text text-anchor="start" x="1258" y="-557.8" font-family="Times,serif" font-size="14.00">forward(x, timesteps)</text>
</g>
<!-- diffusionmodules.openaimodel.QKVAttention -->
<g id="node5" class="node">
<title>diffusionmodules.openaimodel.QKVAttention</title>
<polygon fill="none" stroke="black" points="0,-15.5 0,-114.5 218,-114.5 218,-15.5 0,-15.5"/>
<text text-anchor="middle" x="109" y="-99.3" font-family="Times,serif" font-size="14.00">QKVAttention</text>
<polyline fill="none" stroke="black" points="0,-91.5 218,-91.5 "/>
<text text-anchor="start" x="8" y="-76.3" font-family="Times,serif" font-size="14.00">attention_op : Optional[Any]</text>
<text text-anchor="start" x="8" y="-61.3" font-family="Times,serif" font-size="14.00">n_heads</text>
<polyline fill="none" stroke="black" points="0,-53.5 218,-53.5 "/>
<text text-anchor="start" x="8" y="-38.3" font-family="Times,serif" font-size="14.00">count_flops(model, _x, y)</text>
<text text-anchor="start" x="8" y="-23.3" font-family="Times,serif" font-size="14.00">forward(qkv)</text>
</g>
<!-- diffusionmodules.openaimodel.QKVAttention&#45;&gt;diffusionmodules.openaimodel.AttentionBlock -->
<g id="edge8" class="edge">
<title>diffusionmodules.openaimodel.QKVAttention&#45;&gt;diffusionmodules.openaimodel.AttentionBlock</title>
<path fill="none" stroke="black" d="M150.93,-114.91C160.2,-125.78 169.96,-137.26 179,-148 201.94,-175.23 226.79,-205.02 249.24,-232.04"/>
<polygon fill="black" stroke="black" points="249.41,-232.24 256.32,-234.3 257.08,-241.47 250.17,-239.41 249.41,-232.24"/>
<text text-anchor="middle" x="224" y="-151.8" font-family="Times,serif" font-size="14.00" fill="green">attention</text>
</g>
<!-- diffusionmodules.openaimodel.QKVAttention&#45;&gt;diffusionmodules.openaimodel.AttentionPool2d -->
<g id="edge9" class="edge">
<title>diffusionmodules.openaimodel.QKVAttention&#45;&gt;diffusionmodules.openaimodel.AttentionPool2d</title>
<path fill="none" stroke="black" d="M109,-114.67C109,-151.25 109,-202.05 109,-243.97"/>
<polygon fill="black" stroke="black" points="109,-244.1 113,-250.1 109,-256.1 105,-250.1 109,-244.1"/>
<text text-anchor="middle" x="142" y="-151.8" font-family="Times,serif" font-size="14.00" fill="green">attention</text>
</g>
<!-- diffusionmodules.openaimodel.QKVAttentionLegacy -->
<g id="node6" class="node">
<title>diffusionmodules.openaimodel.QKVAttentionLegacy</title>
<polygon fill="none" stroke="black" points="236,-15.5 236,-114.5 454,-114.5 454,-15.5 236,-15.5"/>
<text text-anchor="middle" x="345" y="-99.3" font-family="Times,serif" font-size="14.00">QKVAttentionLegacy</text>
<polyline fill="none" stroke="black" points="236,-91.5 454,-91.5 "/>
<text text-anchor="start" x="244" y="-76.3" font-family="Times,serif" font-size="14.00">attention_op : Optional[Any]</text>
<text text-anchor="start" x="244" y="-61.3" font-family="Times,serif" font-size="14.00">n_heads</text>
<polyline fill="none" stroke="black" points="236,-53.5 454,-53.5 "/>
<text text-anchor="start" x="244" y="-38.3" font-family="Times,serif" font-size="14.00">count_flops(model, _x, y)</text>
<text text-anchor="start" x="244" y="-23.3" font-family="Times,serif" font-size="14.00">forward(qkv)</text>
</g>
<!-- diffusionmodules.openaimodel.QKVAttentionLegacy&#45;&gt;diffusionmodules.openaimodel.AttentionBlock -->
<g id="edge10" class="edge">
<title>diffusionmodules.openaimodel.QKVAttentionLegacy&#45;&gt;diffusionmodules.openaimodel.AttentionBlock</title>
<path fill="none" stroke="black" d="M340.59,-114.67C337.67,-146.98 333.74,-190.38 330.24,-228.95"/>
<polygon fill="black" stroke="black" points="330.23,-229.07 333.68,-235.4 329.15,-241.02 325.71,-234.68 330.23,-229.07"/>
<text text-anchor="middle" x="371" y="-151.8" font-family="Times,serif" font-size="14.00" fill="green">attention</text>
</g>
<!-- diffusionmodules.openaimodel.TimestepBlock -->
<g id="node9" class="node">
<title>diffusionmodules.openaimodel.TimestepBlock</title>
<polygon fill="none" stroke="black" points="739.5,-692 739.5,-762 870.5,-762 870.5,-692 739.5,-692"/>
<text text-anchor="middle" x="805" y="-746.8" font-family="Times,serif" font-size="14.00">TimestepBlock</text>
<polyline fill="none" stroke="black" points="739.5,-739 870.5,-739 "/>
<polyline fill="none" stroke="black" points="739.5,-715 870.5,-715 "/>
<text text-anchor="start" x="747.5" y="-699.8" font-family="Times,serif" font-size="14.00">forward(x, emb)</text>
</g>
<!-- diffusionmodules.openaimodel.ResBlock&#45;&gt;diffusionmodules.openaimodel.TimestepBlock -->
<g id="edge1" class="edge">
<title>diffusionmodules.openaimodel.ResBlock&#45;&gt;diffusionmodules.openaimodel.TimestepBlock</title>
<path fill="none" stroke="black" d="M805,-453.17C805,-531.96 805,-627.2 805,-681.78"/>
<polygon fill="none" stroke="black" points="801.5,-681.81 805,-691.81 808.5,-681.81 801.5,-681.81"/>
</g>
<!-- diffusionmodules.openaimodel.TimestepBlockDual -->
<g id="node11" class="node">
<title>diffusionmodules.openaimodel.TimestepBlockDual</title>
<polygon fill="none" stroke="black" points="462,-692 462,-762 636,-762 636,-692 462,-692"/>
<text text-anchor="middle" x="549" y="-746.8" font-family="Times,serif" font-size="14.00">TimestepBlockDual</text>
<polyline fill="none" stroke="black" points="462,-739 636,-739 "/>
<polyline fill="none" stroke="black" points="462,-715 636,-715 "/>
<text text-anchor="start" x="470" y="-699.8" font-family="Times,serif" font-size="14.00">forward(x, emb, cond)</text>
</g>
<!-- diffusionmodules.openaimodel.ResBlockDual&#45;&gt;diffusionmodules.openaimodel.TimestepBlockDual -->
<g id="edge2" class="edge">
<title>diffusionmodules.openaimodel.ResBlockDual&#45;&gt;diffusionmodules.openaimodel.TimestepBlockDual</title>
<path fill="none" stroke="black" d="M549,-460.75C549,-538.03 549,-629.04 549,-681.86"/>
<polygon fill="none" stroke="black" points="545.5,-681.9 549,-691.9 552.5,-681.9 545.5,-681.9"/>
</g>
<!-- diffusionmodules.openaimodel.TimestepBlock3cond -->
<g id="node10" class="node">
<title>diffusionmodules.openaimodel.TimestepBlock3cond</title>
<polygon fill="none" stroke="black" points="896.5,-30 896.5,-100 1159.5,-100 1159.5,-30 896.5,-30"/>
<text text-anchor="middle" x="1028" y="-84.8" font-family="Times,serif" font-size="14.00">TimestepBlock3cond</text>
<polyline fill="none" stroke="black" points="896.5,-77 1159.5,-77 "/>
<polyline fill="none" stroke="black" points="896.5,-53 1159.5,-53 "/>
<text text-anchor="start" x="904.5" y="-37.8" font-family="Times,serif" font-size="14.00">forward(x, emb, s_cond, seg_cond)</text>
</g>
<!-- diffusionmodules.openaimodel.TimestepEmbedSequential -->
<g id="node12" class="node">
<title>diffusionmodules.openaimodel.TimestepEmbedSequential</title>
<polygon fill="none" stroke="black" points="1051,-286 1051,-356 1411,-356 1411,-286 1051,-286"/>
<text text-anchor="middle" x="1231" y="-340.8" font-family="Times,serif" font-size="14.00">TimestepEmbedSequential</text>
<polyline fill="none" stroke="black" points="1051,-333 1411,-333 "/>
<polyline fill="none" stroke="black" points="1051,-309 1411,-309 "/>
<text text-anchor="start" x="1059" y="-293.8" font-family="Times,serif" font-size="14.00">forward(x, emb, context, struct_cond, seg_cond)</text>
</g>
<!-- diffusionmodules.openaimodel.TimestepEmbedSequential&#45;&gt;diffusionmodules.openaimodel.EncoderUNetModelWT -->
<g id="edge11" class="edge">
<title>diffusionmodules.openaimodel.TimestepEmbedSequential&#45;&gt;diffusionmodules.openaimodel.EncoderUNetModelWT</title>
<path fill="none" stroke="black" d="M1241.3,-356.1C1253.65,-397 1275.33,-468.79 1296.32,-538.31"/>
<polygon fill="black" stroke="black" points="1296.35,-538.41 1301.91,-543 1299.82,-549.9 1294.26,-545.31 1296.35,-538.41"/>
<text text-anchor="middle" x="1328" y="-482.8" font-family="Times,serif" font-size="14.00" fill="green">middle_block</text>
</g>
<!-- diffusionmodules.openaimodel.TimestepEmbedSequential&#45;&gt;diffusionmodules.openaimodel.TimestepBlock -->
<g id="edge3" class="edge">
<title>diffusionmodules.openaimodel.TimestepEmbedSequential&#45;&gt;diffusionmodules.openaimodel.TimestepBlock</title>
<path fill="none" stroke="black" d="M1124.19,-356.14C1046.62,-385.96 944.39,-436.46 880,-512 838.21,-561.02 819.2,-634.8 810.93,-681.67"/>
<polygon fill="none" stroke="black" points="807.43,-681.37 809.23,-691.81 814.33,-682.53 807.43,-681.37"/>
</g>
<!-- diffusionmodules.openaimodel.UNetModel -->
<g id="node14" class="node">
<title>diffusionmodules.openaimodel.UNetModel</title>
<polygon fill="none" stroke="black" points="1474.5,-512.5 1474.5,-941.5 1725.5,-941.5 1725.5,-512.5 1474.5,-512.5"/>
<text text-anchor="middle" x="1600" y="-926.3" font-family="Times,serif" font-size="14.00">UNetModel</text>
<polyline fill="none" stroke="black" points="1474.5,-918.5 1725.5,-918.5 "/>
<text text-anchor="start" x="1482.5" y="-903.3" font-family="Times,serif" font-size="14.00">attention_resolutions</text>
<text text-anchor="start" x="1482.5" y="-888.3" font-family="Times,serif" font-size="14.00">channel_mult : tuple</text>
<text text-anchor="start" x="1482.5" y="-873.3" font-family="Times,serif" font-size="14.00">conv_resample : bool</text>
<text text-anchor="start" x="1482.5" y="-858.3" font-family="Times,serif" font-size="14.00">dropout : int</text>
<text text-anchor="start" x="1482.5" y="-843.3" font-family="Times,serif" font-size="14.00">dtype</text>
<text text-anchor="start" x="1482.5" y="-828.3" font-family="Times,serif" font-size="14.00">id_predictor</text>
<text text-anchor="start" x="1482.5" y="-813.3" font-family="Times,serif" font-size="14.00">image_size</text>
<text text-anchor="start" x="1482.5" y="-798.3" font-family="Times,serif" font-size="14.00">in_channels</text>
<text text-anchor="start" x="1482.5" y="-783.3" font-family="Times,serif" font-size="14.00">input_blocks</text>
<text text-anchor="start" x="1482.5" y="-768.3" font-family="Times,serif" font-size="14.00">label_emb</text>
<text text-anchor="start" x="1482.5" y="-753.3" font-family="Times,serif" font-size="14.00">middle_block</text>
<text text-anchor="start" x="1482.5" y="-738.3" font-family="Times,serif" font-size="14.00">model_channels</text>
<text text-anchor="start" x="1482.5" y="-723.3" font-family="Times,serif" font-size="14.00">num_classes : NoneType</text>
<text text-anchor="start" x="1482.5" y="-708.3" font-family="Times,serif" font-size="14.00">num_head_channels : int</text>
<text text-anchor="start" x="1482.5" y="-693.3" font-family="Times,serif" font-size="14.00">num_heads : int</text>
<text text-anchor="start" x="1482.5" y="-678.3" font-family="Times,serif" font-size="14.00">num_heads_upsample : int</text>
<text text-anchor="start" x="1482.5" y="-663.3" font-family="Times,serif" font-size="14.00">num_res_blocks</text>
<text text-anchor="start" x="1482.5" y="-648.3" font-family="Times,serif" font-size="14.00">out</text>
<text text-anchor="start" x="1482.5" y="-633.3" font-family="Times,serif" font-size="14.00">out_channels</text>
<text text-anchor="start" x="1482.5" y="-618.3" font-family="Times,serif" font-size="14.00">output_blocks</text>
<text text-anchor="start" x="1482.5" y="-603.3" font-family="Times,serif" font-size="14.00">predict_codebook_ids</text>
<text text-anchor="start" x="1482.5" y="-588.3" font-family="Times,serif" font-size="14.00">time_embed</text>
<text text-anchor="start" x="1482.5" y="-573.3" font-family="Times,serif" font-size="14.00">use_checkpoint : bool</text>
<polyline fill="none" stroke="black" points="1474.5,-565.5 1725.5,-565.5 "/>
<text text-anchor="start" x="1482.5" y="-550.3" font-family="Times,serif" font-size="14.00">convert_to_fp16()</text>
<text text-anchor="start" x="1482.5" y="-535.3" font-family="Times,serif" font-size="14.00">convert_to_fp32()</text>
<text text-anchor="start" x="1482.5" y="-520.3" font-family="Times,serif" font-size="14.00">forward(x, timesteps, context, y)</text>
</g>
<!-- diffusionmodules.openaimodel.TimestepEmbedSequential&#45;&gt;diffusionmodules.openaimodel.UNetModel -->
<g id="edge12" class="edge">
<title>diffusionmodules.openaimodel.TimestepEmbedSequential&#45;&gt;diffusionmodules.openaimodel.UNetModel</title>
<path fill="none" stroke="black" d="M1282.07,-356.03C1332.4,-391.18 1409.6,-449.57 1465,-512 1465.49,-512.55 1465.98,-513.11 1466.47,-513.66"/>
<polygon fill="black" stroke="black" points="1466.51,-513.72 1473.46,-515.67 1474.32,-522.83 1467.38,-520.87 1466.51,-513.72"/>
<text text-anchor="middle" x="1489" y="-482.8" font-family="Times,serif" font-size="14.00" fill="green">middle_block</text>
</g>
<!-- diffusionmodules.openaimodel.UNetModelDualcondV2 -->
<g id="node15" class="node">
<title>diffusionmodules.openaimodel.UNetModelDualcondV2</title>
<polygon fill="none" stroke="black" points="888.5,-512.5 888.5,-941.5 1231.5,-941.5 1231.5,-512.5 888.5,-512.5"/>
<text text-anchor="middle" x="1060" y="-926.3" font-family="Times,serif" font-size="14.00">UNetModelDualcondV2</text>
<polyline fill="none" stroke="black" points="888.5,-918.5 1231.5,-918.5 "/>
<text text-anchor="start" x="896.5" y="-903.3" font-family="Times,serif" font-size="14.00">attention_resolutions</text>
<text text-anchor="start" x="896.5" y="-888.3" font-family="Times,serif" font-size="14.00">channel_mult : tuple</text>
<text text-anchor="start" x="896.5" y="-873.3" font-family="Times,serif" font-size="14.00">conv_resample : bool</text>
<text text-anchor="start" x="896.5" y="-858.3" font-family="Times,serif" font-size="14.00">dropout : int</text>
<text text-anchor="start" x="896.5" y="-843.3" font-family="Times,serif" font-size="14.00">dtype</text>
<text text-anchor="start" x="896.5" y="-828.3" font-family="Times,serif" font-size="14.00">id_predictor</text>
<text text-anchor="start" x="896.5" y="-813.3" font-family="Times,serif" font-size="14.00">image_size</text>
<text text-anchor="start" x="896.5" y="-798.3" font-family="Times,serif" font-size="14.00">in_channels</text>
<text text-anchor="start" x="896.5" y="-783.3" font-family="Times,serif" font-size="14.00">input_blocks</text>
<text text-anchor="start" x="896.5" y="-768.3" font-family="Times,serif" font-size="14.00">label_emb</text>
<text text-anchor="start" x="896.5" y="-753.3" font-family="Times,serif" font-size="14.00">middle_block</text>
<text text-anchor="start" x="896.5" y="-738.3" font-family="Times,serif" font-size="14.00">model_channels</text>
<text text-anchor="start" x="896.5" y="-723.3" font-family="Times,serif" font-size="14.00">num_classes : NoneType</text>
<text text-anchor="start" x="896.5" y="-708.3" font-family="Times,serif" font-size="14.00">num_head_channels : int</text>
<text text-anchor="start" x="896.5" y="-693.3" font-family="Times,serif" font-size="14.00">num_heads : int</text>
<text text-anchor="start" x="896.5" y="-678.3" font-family="Times,serif" font-size="14.00">num_heads_upsample : int</text>
<text text-anchor="start" x="896.5" y="-663.3" font-family="Times,serif" font-size="14.00">num_res_blocks</text>
<text text-anchor="start" x="896.5" y="-648.3" font-family="Times,serif" font-size="14.00">out</text>
<text text-anchor="start" x="896.5" y="-633.3" font-family="Times,serif" font-size="14.00">out_channels</text>
<text text-anchor="start" x="896.5" y="-618.3" font-family="Times,serif" font-size="14.00">output_blocks</text>
<text text-anchor="start" x="896.5" y="-603.3" font-family="Times,serif" font-size="14.00">predict_codebook_ids</text>
<text text-anchor="start" x="896.5" y="-588.3" font-family="Times,serif" font-size="14.00">time_embed</text>
<text text-anchor="start" x="896.5" y="-573.3" font-family="Times,serif" font-size="14.00">use_checkpoint : bool</text>
<polyline fill="none" stroke="black" points="888.5,-565.5 1231.5,-565.5 "/>
<text text-anchor="start" x="896.5" y="-550.3" font-family="Times,serif" font-size="14.00">convert_to_fp16()</text>
<text text-anchor="start" x="896.5" y="-535.3" font-family="Times,serif" font-size="14.00">convert_to_fp32()</text>
<text text-anchor="start" x="896.5" y="-520.3" font-family="Times,serif" font-size="14.00">forward(x, timesteps, context, struct_cond, y)</text>
</g>
<!-- diffusionmodules.openaimodel.TimestepEmbedSequential&#45;&gt;diffusionmodules.openaimodel.UNetModelDualcondV2 -->
<g id="edge13" class="edge">
<title>diffusionmodules.openaimodel.TimestepEmbedSequential&#45;&gt;diffusionmodules.openaimodel.UNetModelDualcondV2</title>
<path fill="none" stroke="black" d="M1216.57,-356.1C1202.38,-389.63 1179.4,-443.9 1155.37,-500.67"/>
<polygon fill="black" stroke="black" points="1155.23,-501 1156.58,-508.09 1150.56,-512.05 1149.21,-504.97 1155.23,-501"/>
<text text-anchor="middle" x="1207" y="-482.8" font-family="Times,serif" font-size="14.00" fill="green">middle_block</text>
</g>
<!-- diffusionmodules.openaimodel.TransposedUpsample -->
<g id="node13" class="node">
<title>diffusionmodules.openaimodel.TransposedUpsample</title>
<polygon fill="none" stroke="black" points="1177.5,-15.5 1177.5,-114.5 1348.5,-114.5 1348.5,-15.5 1177.5,-15.5"/>
<text text-anchor="middle" x="1263" y="-99.3" font-family="Times,serif" font-size="14.00">TransposedUpsample</text>
<polyline fill="none" stroke="black" points="1177.5,-91.5 1348.5,-91.5 "/>
<text text-anchor="start" x="1185.5" y="-76.3" font-family="Times,serif" font-size="14.00">channels</text>
<text text-anchor="start" x="1185.5" y="-61.3" font-family="Times,serif" font-size="14.00">out_channels</text>
<text text-anchor="start" x="1185.5" y="-46.3" font-family="Times,serif" font-size="14.00">up</text>
<polyline fill="none" stroke="black" points="1177.5,-38.5 1348.5,-38.5 "/>
<text text-anchor="start" x="1185.5" y="-23.3" font-family="Times,serif" font-size="14.00">forward(x)</text>
</g>
<!-- diffusionmodules.openaimodel.Upsample -->
<g id="node16" class="node">
<title>diffusionmodules.openaimodel.Upsample</title>
<polygon fill="none" stroke="black" points="768,-0.5 768,-129.5 878,-129.5 878,-0.5 768,-0.5"/>
<text text-anchor="middle" x="823" y="-114.3" font-family="Times,serif" font-size="14.00">Upsample</text>
<polyline fill="none" stroke="black" points="768,-106.5 878,-106.5 "/>
<text text-anchor="start" x="776" y="-91.3" font-family="Times,serif" font-size="14.00">channels</text>
<text text-anchor="start" x="776" y="-76.3" font-family="Times,serif" font-size="14.00">conv</text>
<text text-anchor="start" x="776" y="-61.3" font-family="Times,serif" font-size="14.00">dims : int</text>
<text text-anchor="start" x="776" y="-46.3" font-family="Times,serif" font-size="14.00">out_channels</text>
<text text-anchor="start" x="776" y="-31.3" font-family="Times,serif" font-size="14.00">use_conv</text>
<polyline fill="none" stroke="black" points="768,-23.5 878,-23.5 "/>
<text text-anchor="start" x="776" y="-8.3" font-family="Times,serif" font-size="14.00">forward(x)</text>
</g>
<!-- diffusionmodules.openaimodel.Upsample&#45;&gt;diffusionmodules.openaimodel.ResBlock -->
<g id="edge14" class="edge">
<title>diffusionmodules.openaimodel.Upsample&#45;&gt;diffusionmodules.openaimodel.ResBlock</title>
<path fill="none" stroke="black" d="M832.41,-129.93C833.06,-136.03 833.61,-142.12 834,-148 834.62,-157.35 834.67,-166.95 834.28,-176.6"/>
<polygon fill="black" stroke="black" points="834.26,-176.87 837.9,-183.1 833.55,-188.85 829.91,-182.62 834.26,-176.87"/>
<text text-anchor="middle" x="855.5" y="-151.8" font-family="Times,serif" font-size="14.00" fill="green">h_upd</text>
</g>
<!-- diffusionmodules.openaimodel.Upsample&#45;&gt;diffusionmodules.openaimodel.ResBlock -->
<g id="edge15" class="edge">
<title>diffusionmodules.openaimodel.Upsample&#45;&gt;diffusionmodules.openaimodel.ResBlock</title>
<path fill="none" stroke="black" d="M877.67,-129.6C881.87,-140.29 883.61,-151.62 881,-163 879.93,-167.68 878.69,-172.38 877.33,-177.09"/>
<polygon fill="black" stroke="black" points="877.25,-177.33 879.28,-184.25 873.67,-188.78 871.64,-181.86 877.25,-177.33"/>
<text text-anchor="middle" x="903.5" y="-151.8" font-family="Times,serif" font-size="14.00" fill="green">x_upd</text>
</g>
<!-- diffusionmodules.openaimodel.Upsample&#45;&gt;diffusionmodules.openaimodel.ResBlockDual -->
<g id="edge16" class="edge">
<title>diffusionmodules.openaimodel.Upsample&#45;&gt;diffusionmodules.openaimodel.ResBlockDual</title>
<path fill="none" stroke="black" d="M767.82,-91.46C739.05,-104.12 703.06,-119.02 670,-130 638.7,-140.39 621.7,-125.06 598,-148 590.94,-154.83 584.88,-162.6 579.68,-170.97"/>
<polygon fill="black" stroke="black" points="579.65,-171.02 580.18,-178.21 573.74,-181.46 573.22,-174.27 579.65,-171.02"/>
<text text-anchor="middle" x="619.5" y="-151.8" font-family="Times,serif" font-size="14.00" fill="green">h_upd</text>
</g>
<!-- diffusionmodules.openaimodel.Upsample&#45;&gt;diffusionmodules.openaimodel.ResBlockDual -->
<g id="edge17" class="edge">
<title>diffusionmodules.openaimodel.Upsample&#45;&gt;diffusionmodules.openaimodel.ResBlockDual</title>
<path fill="none" stroke="black" d="M790.69,-129.66C781.87,-142.19 771.29,-154.17 759,-163 733.61,-181.25 718.18,-165.55 691,-181 681.96,-186.14 673.07,-192 664.44,-198.33"/>
<polygon fill="black" stroke="black" points="664.34,-198.4 662,-205.22 654.8,-205.67 657.15,-198.85 664.34,-198.4"/>
<text text-anchor="middle" x="796.5" y="-151.8" font-family="Times,serif" font-size="14.00" fill="green">x_upd</text>
</g>
</g>
</svg>
